# التصميم الهندسي للقالب النموذجي الاستراتيجي لـ Kiro

## 1. الهيكل المعماري لملفات `.kiro/`

سيتم تصميم هيكل `.kiro/` ليكون معياريًا وقابلاً للتوسع، مع فصل واضح للمسؤوليات:

| المجلد | المسؤولية الأساسية | الوصف |
| :--- | :--- | :--- |
| **specs/** | التخطيط الاستراتيجي | يحتوي على جميع وثائق المواصفات الهندسية للمشروع (Requirements, Design, Metrics). |
| **steering/** | المبادئ والتوجيه | يحتوي على ملفات Markdown التي تفرض المبادئ الفلسفية، التقنية، والأمنية على الوكيل. |
| **hooks/** | الأتمتة والوقاية | يحتوي على ملفات قابلة للتنفيذ (Shell/JS/Python) يتم تشغيلها تلقائيًا أو يدويًا لفرض الأتمتة. |
| **prompts/** | البرامج المعرفية | يحتوي على قوالب نصية (Markdown) توجه الوكيل لتنفيذ مهام معقدة ومحددة بدقة. |
| **settings/** | التكوين والاتصال | يحتوي على ملفات التكوين مثل `mcp.json` للاتصال بالخدمات الخارجية. |

## 2. آلية التفاعل بين المكونات

*   **Steering -> Prompts:** ملفات التوجيه (مثل `steering/tech_stack.md`) سيتم إدراجها تلقائيًا في سياق أي برنامج (Prompt) يتم تشغيله، لضمان أن المخرجات تلتزم بالمعايير التقنية.
*   **Hooks -> Specs:** خطاف `on-save` لتحديث التوثيق سيقوم بتحليل التغييرات في ملفات الكود ثم تحديث ملخصات في `specs/` (مثل تحديث قائمة الميزات المكتملة).
*   **MCP -> Prompts:** سيتم استخدام تكوين `mcp.json` للسماح لـ `prompts/refactor_code.prompt.md` بالوصول إلى وثائق Go/Flutter الرسمية لضمان أن الكود المولد صحيح ومحدث.

## 3. تصميم ملفات التوجيه (Steering Design)

سيتم استخدام نظام ترقيم لملفات التوجيه لفرض الأولوية والترتيب:

*   **00_philosophy.md:** (الأولوية القصوى) المبادئ الفلسفية العامة (مثل "البساطة أولاً").
*   **10_tech_stack.md:** (الأولوية المتوسطة) المكدس التقني المعتمد.
*   **99_security.md:** (الأولوية الحرجة) قواعد الأمان التي يجب عدم انتهاكها أبدًا.

## 4. تصميم خطافات الأتمتة (Hooks Design)

سيتم تصميم الخطافات لتكون بسيطة وقابلة للتنفيذ عبر Shell Script لضمان التوافقية والسرعة:

*   **`on-commit`:** يجب أن تكون سريعة جدًا (أقل من 3 ثوانٍ) لتجنب إحباط المطور.
*   **`on-save`:** يجب أن تكون خفيفة جدًا وتعمل في الخلفية أو تقدم إشعارات غير مزعجة.
*   **`manual`:** مخصصة للعمليات الطويلة أو المعقدة التي تتطلب قرارًا من المطور (مثل النشر أو توليد التقارير).
