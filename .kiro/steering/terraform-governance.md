# توجيه حوكمة Terraform (Terraform Governance Steering)

## المبدأ الأساسي: البنية التحتية كأصل استراتيجي (IaC as a Strategic Asset)

يجب التعامل مع البنية التحتية ككود (IaC) بنفس مستوى الصرامة في الأمان والحوكمة المطبق على كود التطبيق. هذا يضمن التوافق مع مبادئ **Security-First** و **Sustainability**.

## 1. متطلبات الأمان الإلزامية (Mandatory Security Requirements)

| القاعدة | الوصف | التوجيه للوكيل |
| :--- | :--- | :--- |
| **تعطيل الوصول العام** | يجب تعطيل الوصول العام (Public Access) بشكل افتراضي لجميع الموارد الحساسة (مثل S3 Buckets، قواعد البيانات، Load Balancers). | يجب على الوكيل التأكد من تعيين `block_public_acls = true` و `ignore_public_acls = true` لـ S3، وعدم استخدام `public_ip` في موارد EC2. |
| **التشفير في حالة السكون** | يجب تشفير جميع البيانات المخزنة في قواعد البيانات وأنظمة التخزين (مثل S3، EBS) باستخدام مفاتيح مدارة (KMS). | يجب على الوكيل التأكد من تعيين خاصية التشفير (Encryption) على `true` واستخدام مفاتيح KMS. |
| **أقل الامتيازات (IAM)** | يجب أن تكون سياسات IAM محددة بأقل مجموعة من الأذونات المطلوبة لأداء الوظيفة. | يجب على الوكيل تجنب استخدام `*` في حقل `Action` أو `Resource` في سياسات IAM. |

## 2. متطلبات الحوكمة والتكلفة (Governance and Cost Requirements)

| القاعدة | الوصف | التوجيه للوكيل |
| :--- | :--- | :--- |
| **العلامات الإلزامية (Mandatory Tags)** | يجب أن تحتوي جميع الموارد التي تم إنشاؤها بواسطة Terraform على مجموعة إلزامية من العلامات (Tags) لتتبع التكلفة والملكية. | يجب على الوكيل فرض العلامات التالية: `Project`، `Owner`، `CostCenter`، `Environment`. |
| **استخدام الوحدات النمطية المعتمدة** | يجب استخدام الوحدات النمطية (Modules) المعتمدة والمراجعة مسبقًا بدلاً من كتابة الموارد مباشرة. | يجب على الوكيل البحث عن الوحدات النمطية الداخلية المعتمدة قبل إنشاء موارد جديدة. |
| **التنظيف (Cleanup)** | يجب أن يتضمن كود Terraform آليات واضحة لتدمير الموارد (Destroy) في بيئات التطوير والاختبار. | يجب على الوكيل توثيق عملية التدمير بوضوح لتقليل التكاليف غير الضرورية. |

## 3. التحقق من الامتثال

يجب على وكيل المراجعة (`prReview.prompt.md`) التحقق بشكل إلزامي مما يلي:

1.  هل تم تعطيل الوصول العام لجميع الموارد الحساسة؟
2.  هل تم تطبيق العلامات الإلزامية (`Project`, `Owner`, `CostCenter`) على جميع الموارد؟
3.  هل تم تجنب استخدام `*` في سياسات IAM؟
