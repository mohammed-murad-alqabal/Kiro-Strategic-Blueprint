# توجيه المكدس التقني (Technology Stack Steering)

هذا الملف يحدد المكدس التقني المعتمد للمشروع. يجب على وكلاء الذكاء الاصطناعي الالتزام بهذه التقنيات عند إنشاء أو تعديل الكود. أي انحراف عن هذا المكدس يتطلب موافقة صريحة وموثقة في ملف `specs/design.md`.

## 1. المكدس التقني المعتمد (Approved Tech Stack)

| المجال | التقنية المعتمدة | الملاحظات والتوجيهات |
| :--- | :--- | :--- |
| **الواجهة الأمامية (Frontend)** | **Flutter** (أو Vue.js/React حسب المشروع) | يجب استخدام **TypeScript** لضمان الأمان النوعي (Type Safety). |
| **الواجهة الخلفية (Backend)** | **Go** (أو Bun/Node.js حسب المشروع) | يجب استخدام **Go** للخدمات عالية الأداء. استخدام Bun/Node.js مسموح به للخدمات الأقل أهمية. |
| **قاعدة البيانات (Database)** | **PostgreSQL** | يجب استخدام ORM/Query Builder معتمد (مثل GORM في Go) لضمان أمان التعامل مع البيانات. |
| **التخزين المؤقت (Caching)** | **Redis** | يُستخدم للتخزين المؤقت للجلسات والبيانات المتكررة الوصول. |
| **الحوسبة السحابية (Cloud)** | **AWS** (أو GCP/Azure حسب المشروع) | يجب الالتزام بالخدمات المحددة في `iac/` لكل خدمة. |
| **الذكاء الاصطناعي (AI/LLM)** | **AWS Bedrock** (أو OpenAI/Gemini حسب التكوين) | يجب أن يتم التفاعل مع النماذج عبر **MCP** الموضح في `settings/mcp.json`. |

## 2. متطلبات جودة الكود (Code Quality Requirements)

يجب على الوكيل الالتزام بالمعايير التالية لضمان جودة الكود:

*   **TypeScript/Go Type Safety:** يجب تفعيل التحقق الصارم من الأنواع (Strict Type Checking) في جميع الملفات.
*   **Linting & Formatting:** يجب تطبيق ESLint/Prettier (لـ JS/TS) أو `gofmt`/`golint` (لـ Go) تلقائيًا قبل كل التزام (Commit).
*   **Unit Testing:** يجب أن يكون لكل وحدة منطقية (Module/Function) اختبارات وحدوية (Unit Tests) تغطي المسارات الحرجة.

## 3. متطلبات الأمان (Security Requirements)

*   **Input Validation:** يجب التحقق من صحة جميع المدخلات (Input Validation) على مستوى الواجهة الخلفية.
*   **Dependency Scanning:** يجب إجراء فحص دوري للتبعيات (Dependencies) بحثًا عن ثغرات أمنية معروفة.
*   **Secret Management:** يجب عدم تخزين أي مفاتيح سرية (Secrets) في الكود المصدري؛ يجب استخدام نظام إدارة الأسرار المعتمد (مثل AWS Secrets Manager).
